{% extends "admin/base_site.html" %}

{% block content %}
<h1 style="margin-bottom: 20px;">ðŸ“Š Dashboard General</h1>

<!-- Tarjetas de mÃ©tricas -->
<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px;">
    <div style="padding: 20px; background: #f8f9fa; border-radius: 10px; text-align: center;">
        <h3>Total Contenedores</h3>
        <p style="font-size: 24px; font-weight: bold;">{{ total_contenedores }}</p>
    </div>

    <div style="padding: 20px; background: #f8f9fa; border-radius: 10px; text-align: center;">
        <h3>Contenedores Pendientes</h3>
        <p style="font-size: 24px; font-weight: bold; color: #d9534f;">{{ pendientes }}</p>
    </div>

    <div style="padding: 20px; background: #f8f9fa; border-radius: 10px; text-align: center;">
        <h3>En TrÃ¡nsito</h3>
        <p style="font-size: 24px; font-weight: bold; color: #f0ad4e;">{{ en_transito }}</p>
    </div>

    <div style="padding: 20px; background: #f8f9fa; border-radius: 10px; text-align: center;">
        <h3>Entregados</h3>
        <p style="font-size: 24px; font-weight: bold; color: #5cb85c;">{{ entregados }}</p>
    </div>

    <div style="padding: 20px; background: #f8f9fa; border-radius: 10px; text-align: center;">
        <h3>Pagos Pendientes</h3>
        <p style="font-size: 24px; font-weight: bold; color: #d9534f;">{{ pagos_pendientes }}</p>
    </div>

    <div style="padding: 20px; background: #f8f9fa; border-radius: 10px; text-align: center;">
        <h3>Pagos Realizados</h3>
        <p style="font-size: 24px; font-weight: bold; color: #5cb85c;">{{ pagos_realizados }}</p>
    </div>

    <div style="padding: 20px; background: #f8f9fa; border-radius: 10px; text-align: center; grid-column: span 3;">
        <h3>Documentos Obligatorios</h3>
        <p style="font-size: 24px; font-weight: bold;">{{ documentos_obligatorios }}</p>
    </div>

    <div style="padding: 20px; background: #f8f9fa; border-radius: 10px; text-align: center; grid-column: span 3;">
        <h3>Navieras Registradas</h3>
        <p style="font-size: 24px; font-weight: bold;">{{ navieras }}</p>
    </div>
</div>

<!-- GrÃ¡ficas -->
<h2>ðŸ“ˆ GrÃ¡ficas</h2>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
    <canvas id="contenedoresChart"></canvas>
    <canvas id="pagosChart"></canvas>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Contenedores
    const contenedoresCtx = document.getElementById('contenedoresChart').getContext('2d');
    new Chart(contenedoresCtx, {
        type: 'doughnut',
        data: {
            labels: ['Pendientes', 'En trÃ¡nsito', 'Entregados'],
            datasets: [{
                label: 'Contenedores',
                data: ["{{ pendientes }}", "{{ en_transito }}", "{{ entregados }}"],
                backgroundColor: ['#d9534f', '#f0ad4e', '#5cb85c'],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true
        }
    });

    // Pagos
    const pagosCtx = document.getElementById('pagosChart').getContext('2d');
    new Chart(pagosCtx, {
        type: 'bar',
        data: {
            labels: ['Pendientes', 'Realizados'],
            datasets: [{
                label: 'Pagos',
                data: ["{{ pagos_pendientes }}", "{{ pagos_realizados }}"],
                backgroundColor: ['#d9534f', '#5cb85c'],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: { beginAtZero: true }
            }
        }
    });
</script>
{% endblock %}